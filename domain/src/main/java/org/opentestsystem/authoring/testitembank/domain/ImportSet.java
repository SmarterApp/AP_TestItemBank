/*******************************************************************************
 * Educational Online Test Delivery System 
 * Copyright (c) 2014 American Institutes for Research
 *   
 * Distributed under the AIR Open Source License, Version 1.0 
 * See accompanying file AIR-License-1_0.txt or at
 * http://www.smarterapp.org/documents/American_Institutes_for_Research_Open_Source_Software_License.pdf
 ******************************************************************************/
package org.opentestsystem.authoring.testitembank.domain;

import java.io.File;
import java.util.ArrayList;
import java.util.List;

import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

import org.hibernate.validator.constraints.NotBlank;
import org.joda.time.DateTime;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;

@XmlRootElement
@JsonIgnoreProperties(ignoreUnknown = true)
public class ImportSet implements Tenanted {

    private static final String GET_RESOURCE_NAME = "/importSet/";

    private String id;

    @NotBlank(message = "importSet.emptyField.tenantId")
    private String tenantId;
    private ImportType importType;
    private ImportStatus importStatus;
    @NotBlank(message = "importSet.emptyField.itemBank")
    private String itemBank;
    @Size(min = 1, message = "importSet.emptyField.importFiles")
    private List<ImportFile> importFiles = new ArrayList<ImportFile>();
    private DateTime requestTime;
    private DateTime importCompleteTime;

    public void addFilePathToImport(final String filePath) {
        final ImportFile importFile = new ImportFile();
        importFile.setImportStatus(ImportStatus.UNIMPORTED);
        importFile.setPathName(filePath);
        importFiles.add(importFile);
    }

    public void addFileToImport(final File file) {
        final ImportFile importFile = new ImportFile();
        importFile.setImportStatus(ImportStatus.UNIMPORTED);
        importFile.setFile(file);
        importFiles.add(importFile);
    }

    public String getId() {
        return id;
    }

    public void setId(final String inId) {
        this.id = inId;
    }

    public String getTenantId() {
        return tenantId;
    }

    public void setTenantId(final String tenantId) {
        this.tenantId = tenantId;
    }

    public ImportType getImportType() {
        return importType;
    }

    public void setImportType(final ImportType inImportType) {
        this.importType = inImportType;
    }

    public String getItemBank () {
      return itemBank;
    }

    public void setItemBank (String itemBank) {
      this.itemBank = itemBank;
    }

    public ImportStatus getImportStatus() {
        return importStatus;
    }

    public void setImportStatus(final ImportStatus inImportStatus) {
        this.importStatus = inImportStatus;
    }

    public DateTime getRequestTime() {
        return requestTime;
    }

    public void setRequestTime(final DateTime inRequestTime) {
        this.requestTime = inRequestTime;
    }

    public DateTime getImportCompleteTime() {
        return importCompleteTime;
    }

    public void setImportCompleteTime(final DateTime inImportCompleteTime) {
        this.importCompleteTime = inImportCompleteTime;
    }

    public List<ImportFile> getImportFiles() {
        return importFiles;
    }

    public void setImportFiles(final List<ImportFile> inImportFiles) {
        this.importFiles = inImportFiles;
    }

    @XmlTransient
    public String getUrl() {
        return GET_RESOURCE_NAME + getId();
    }

}
